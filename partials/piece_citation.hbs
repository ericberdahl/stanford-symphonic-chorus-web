{{#x-let . style=(_defaultTo style "em-tagged") }}
    {{#x-sentence this.piece }}
        {{#if this.ref }}
            {{_set . '_piece' (ssc-findPiece this.ref)}}
        {{else}}
            {{_set . '_piece' this}}
        {{/if}}

        {{_set . '_citation' (_defaultTo _piece.citation (x-stringConcat "<em>" _piece.title "</em>"))}}

        {{#if (_eq ../style "em-tagged")}}
            {{_set . '_composer' _piece.composer}}
        {{else if (_eq ../style "plain") }}
            {{_set . '_composer' (x-stringConcat _piece.composer ":") }}
            {{_set . '_citation' (x-sanitize _citation) }}
        {{else}}
            {{_set . '_composer' '' }}
        {{/if}}
        {{{_trim (_join (x-array _composer
                                this.prefix
                                _citation
                                this.suffix)
                        " ") }}}
    {{/x-sentence}}
{{/x-let}}