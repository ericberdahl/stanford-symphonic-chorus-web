{%- assign piece = include.piece -%}
{%- assign style = include.style | default: "em-tagged" -%}
{%- assign composer = piece.composer -%}
{%- if piece.arranger -%}
    {%- assign composer = composer | append: ", arr. "
                                  | append: {{piece.arranger}} -%}
{%- endif -%}
{%- assign title = piece.title -%}
{%- if style == "simple" -%}
    {%- assign parenthetical = nil -%}
    {%- assign suffix = nil -%}
{%- else -%}
    {%- assign parenthetical = site.data.program.empty_array | unshift: piece.note
                                                             | unshift: piece.translation
                                                             | compact
                                                             | join: ", " -%}
    {%- if parenthetical != "" -%}
        {%- assign parenthetical = parenthetical | prepend: "("
                                                 | append: ")" -%}
    {%- else -%}                                        
        {%- assign parenthetical = nil -%}
    {%- endif -%}
    {%- assign suffix = piece.suffix -%}
    {%- if suffix -%}
        {%- assign suffix = suffix | prepend: ", " -%}
    {%- endif -%}
{%- endif -%}
{%- case style -%}
    {%- when "plain" -%}
        {%- assign composer = composer | append: ":" -%}
    {%- else -%}
        {%- assign title = title | prepend: "<em>"
                                 | append: "</em>" -%}
{%- endcase -%}
{%- comment -%}composer title (translation, note), suffix {%- endcomment -%}
{{ site.data.program.empty_array | unshift: parenthetical
                                 | unshift: title
                                 | unshift: composer
                                 | compact
                                 | join: " "
                                 | append: suffix }}